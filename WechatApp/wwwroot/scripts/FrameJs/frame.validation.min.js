(function(e,s){if(typeof s.EventType=="undefined"){s.EventType={Click:"click",Change:"change",Blur:"blur",Focus:"focus",KeyDown:"keydown",KeyUp:"keyup",KeyPress:"keypress",MouseDown:"mousedown",MouseUp:"mouseup",MouseOver:"mouseover",MouseLeave:"mouseleave"}}FrameValidation=function(){function t(e,s,t,i,a,r){this.IsValid=i;this.IsProcess=a;this.obj=e;this.eventtype=s;this.category=t;var n=0;this.checkfunc=new Array;this.checkfunc[n]=r}function i(e){var t={ShowMsg:null,RemoveMsg:null,InProcessing:null,RemoveProcessing:null};this.opts=s.extend(t,e);this.dics=new js.util.Dictionary;this.isvalidall=true}i.prototype.DefaultShowMsg=function(e,s){var t=this;t.opts.ShowMsg(e,s)};i.prototype.Register=function(i){var a={id:"",category:"",event:s.EventType.Click,check:function(e){return true},success:null,fail:null,msg:"",showmsg:null,removemsg:null};var r=s.extend(a,i);if(r.id!=""&&e("#"+r.id)){var n=this;var c=e("#"+a.id);var o=function(e){if(n.CurrentState=="new")n.dics.get(c.attr("id")).IsValid=true;if(r.removemsg){r.removemsg(c)}else{n.opts.RemoveMsg(c)}if(!r.check(c)){n.dics.get(c.attr("id")).IsValid=n.dics.get(c.attr("id")).IsValid&false;n.isvalidall=n.isvalidall&false;if(r.showmsg!=null){r.showmsg(c,false,r.msg)}else{n.DefaultShowMsg(c,r.msg)}if(r.fail){r.fail()}if(e&&e.target&&e.target==this){e.stopImmediatePropagation()}}else{if(r.showmsg!=null){r.showmsg(c,true,r.msg)}n.isvalidall=n.isvalidall&true;n.dics.get(c.attr("id")).IsValid=n.dics.get(c.attr("id")).IsValid&true;if(r.success){r.success()}}};switch(r.event){case s.EventType.Click:c.click(o);break;case s.EventType.Change:c.change(o);break;case s.EventType.Focus:c.focus(o);break;case s.EventType.Blur:c.blur(o);break;case s.EventType.MouseOver:c.mouseover(o);break;case s.EventType.MouseDown:c.mouseup(o);break;case s.EventType.MouseUp:c.mouseup(o);break;case s.EventType.MouseLeave:c.mouseleave(o);break;case s.EventType.KeyPress:c.keypress(o);break;case s.EventType.KeyUp:c.keyup(o);break;case s.EventType.KeyDown:c.keydown(o);break;default:break}if(n.dics.containsKey(r.id)){var l=n.dics.get(r.id).checkfunc.length;n.dics.get(r.id).checkfunc[l]=o}else{n.dics.put(r.id,new t(c,r.event,r.category,false,false,o))}}};i.prototype.CurrentState="new";i.prototype.RegisterAjax=function(i){var a={id:"",category:"",event:s.EventType.Click,check:function(e,s){return true},success:null,fail:null,msg:"",showmsg:null,removemsg:null,url:"",data:""};var r=s.extend(a,i);if(r.id!=""&&e("#"+r.id)){var n=this;var c=e("#"+r.id);var o=r.id;if(r.removemsg){r.removemsg(c)}else{n.opts.RemoveMsg(c)}try{var l=function(){if(n.CurrentState=="new")n.dics.get(o).IsValid=true;if(r.removemsg){r.removemsg(c)}else{n.opts.RemoveMsg(c)}var e={};if(typeof r.data==="function"){e=r.data()}else{e=r.data}s.Ajax.Ajax({url:r.url,postdata:e,before:function(){n.dics.get(o).IsProcess=true;n.opts.InProcessing()},success:function(e){n.opts.RemoveProcessing();n.dics.get(o).IsProcess=false;if(r.check==null){s.ExceptionProcess.ShowErrorMsg('The parameter "check" of AjaxValidator can\'t be null!');return}if(!r.check(c,e)){n.dics.get(o).IsValid=n.dics.get(o).IsValid&false;if(r.fail){r.fail()}}else{n.dics.get(o).IsValid=n.dics.get(o).IsValid&true;if(r.success){r.success()}}if(r.showmsg!=null){r.showmsg(c,n.dics.get(o).IsValid)}else{if(!n.dics.get(o).IsValid){n.opts.ShowMsg(c,r.msg)}}},complete:function(){n.opts.RemoveProcessing();n.dics.get(o).IsProcess=false},error:function(){n.opts.RemoveProcessing();n.dics.get(o).IsProcess=false;if(r.fail){r.fail()}},fail:function(e,s){if(r.fail){r.fail()}}})};switch(r.event){case s.EventType.Click:c.click(l);break;case s.EventType.Change:c.change(l);break;case s.EventType.Focus:c.focus(l);break;case s.EventType.Blur:c.blur(l);break;case s.EventType.MouseOver:c.mouseover(l);break;case s.EventType.MouseDown:c.mouseup(l);break;case s.EventType.MouseUp:c.mouseup(l);break;case s.EventType.MouseLeave:c.mouseleave(l);break;case s.EventType.KeyPress:c.keypress(l);break;case s.EventType.KeyUp:c.keyup(l);break;case s.EventType.KeyDown:c.keydown(l);break;default:break}if(n.dics.containsKey(r.id)){var u=n.dics.get(r.id).checkfunc.length;n.dics.get(r.id).checkfunc[u]=l}else{n.dics.put(r.id,new t(c,r.event,r.category,false,false,l))}}catch(e){s.ExceptionProcess.Process(e,"AjaxValidator")}finally{}}};i.prototype.IsValid=function(e){var s=this;var t=true;for(var i=0;i<s.dics.values().size();i++){var a=s.dics.values().get(i);var r=s.dics.get(a);if(e==r.category||e==null||e==""){t=t&r.IsValid}}return t};i.prototype.IsValidateProcess=function(e){var s=this;var t=false;for(var i=0;i<s.dics.values().size();i++){var a=s.dics.values().get(i);var r=s.dics.get(a);if(e==r.category||e==null||e==""){if(r.IsProcess){t=true;break}}}return t};i.prototype.ResetState=function(){var e=this;e.dics.iterate(function(e,s){s.IsValid=true;s.IsProcess=false})};i.prototype.ValidAll=function(e){var t=this;t.CurrentState="ischecking";var i={category:"",timeout:200,success:function(){},fail:function(){},timeoutprocess:function(){}};var a=s.extend(i,e);t.ResetState();t.dics.iterate(function(e,s){if(a.category==null||a.category==""||s.category==a.category){for(var t=0;t<s.checkfunc.length;t++){s.checkfunc[t]()}}});if(t.IsValidateProcess(a.category)){t.intervalid=setInterval(function(){t.timeout=parseInt(a.timeout/100);t.count=0;if(!t.IsValidateProcess()){if(t.IsValid(a.category)){if(a.success!=null){a.success()}}else{if(a.fail!=null){a.fail()}}clearInterval(t.intervalid);t.CurrentState="new"}else{if(t.count>=t.timeout){clearInterval(t.intervalid);if(a.timeoutprocess!=null){a.timeoutprocess()}}}},a.timeout)}else{if(t.IsValid(a.category)){if(a.success!=null){a.success()}}else{if(a.fail!=null){a.fail()}}t.CurrentState="new"}};return i}();_frame_valid_methods={init:function(s){var t=new FrameValidation(s);e(this).data("validation",t);return this},Register:function(s){e(this).data("validation").Register(s);return this},RegisterAjax:function(s){e(this).data("validation").RegisterAjax(s);return this},RegisterRequireInput:function(t,i,a,r,n){var c={id:t,msg:i,category:a,event:r==null?s.EventType.Change:r,check:function(s){if(e(s).val()==""){return false}else{return true}},showmsg:n};this.Register(c);return this},ValidAll:function(s){e(this).data("validation").ValidAll(s);return this}};s.Validation=function(e){var t=e;if(e==null)t=s.Config.Validation;return _frame_valid_methods.init(t)}})(jQuery,FrameNameSpace);