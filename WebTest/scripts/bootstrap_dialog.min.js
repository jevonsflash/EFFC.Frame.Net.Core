(function(a){window.Ewin=function(){var t='<div id="[Id]" class="modal fade" role="dialog" aria-labelledby="modalLabel">'+'<div class="modal-dialog modal-sm">'+'<div class="modal-content">'+'<div class="modal-header">'+'<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>'+'<h4 class="modal-title" id="modalLabel">[Title]</h4>'+"</div>"+'<div class="modal-body">'+"<p>[Message]</p>"+"</div>"+'<div class="modal-footer">'+"</div>"+"</div>"+"</div>"+"</div>";var d='<div id="[Id]" class="modal fade" role="dialog" aria-labelledby="modalLabel">'+'<div class="modal-dialog">'+'<div class="modal-content">'+'<div class="modal-header">'+'<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>'+'<h4 class="modal-title" id="modalLabel">[Title]</h4>'+"</div>"+'<div class="modal-body">'+"</div>"+"</div>"+"</div>"+"</div>";var e=new RegExp("\\[([^\\[\\]]*?)\\]","igm");var o=function(){var a=new Date;return"mdl"+a.valueOf()};var i=function(d){d=a.extend({},{title:"操作提示",message:"提示内容",width:200,auto:false,buttons:[]},d||{});var i=o();var n=t.replace(e,function(a,t){return{Id:i,Title:d.title,Message:d.message}[t]});a("body").append(n);a("#"+i).modal({width:d.width,backdrop:"static"});a("#"+i).on("hide.bs.modal",function(t){a("body").find("#"+i).remove()});return i};return{currentId:"",dialog:function(t){var d=this;if(typeof t=="string"){t={message:t}}var e=i(t);d.currentId=e;var o=a("#"+e);a(t.buttons).each(function(t,d){var e='<button type="button" class="btn btn-default" data-dismiss="modal">'+(d.text?d.text:"")+"</button>";if(["ok","确定"].contains(d.text)){e='<button type="button" class="btn btn-primary ok" data-dismiss="modal">'+(d.text?d.text:"")+"</button>"}var i=a(e);i.click(function(){if(d.click){d.click()}});o.find(".modal-footer").append(i)});return d},alert:function(t){var d=this;if(typeof t=="string"){t={message:t}}var e=this.dialog(a.extend({title:"提示",buttons:[{text:"确定",click:function(){d.close()}}]},t));return e},confirm:function(t){if(typeof t=="string"){t={message:t}}var d=this.dialog(a.extend({title:"确认提示"},t));return d},modal:function(t){t=a.extend({},{title:"title",url:"",width:800,height:550,onReady:function(){},onShown:function(a){}},t||{});var i=o();this.currentId=i;var n=d.replace(e,function(a,d){return{Id:i,Title:t.title}[d]});a("body").append(n);var l=a("#"+i);l.find(".modal-body").load(t.url);if(t.onReady())t.onReady.call(l);l.modal();l.on("shown.bs.modal",function(a){if(t.onReady(a))t.onReady.call(l,a)});l.on("hide.bs.modal",function(t){a("body").find(l).remove()})},close:function(){var t=this;var d=a("#"+t.currentId);d.modal("hide")}}}()})(jQuery);