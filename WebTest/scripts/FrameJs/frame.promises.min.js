(function(n){var e=function(n){setTimeout(n,0)};n.Promise=function(n){if(typeof this!=="object")throw new TypeError("Promises must be constructed via new");if(typeof n!=="function")throw new TypeError("not a function");var o=null;var i=null;var f=[];var u=this;this.then=function(n,e){return new u.constructor(function(r,o){var i=new t(n,e,r,o);c(i)})};function c(n){if(o===null){f.push(n);return}e(function(){var e=o?n.onFulfilled:n.onRejected;if(e===null){(o?n.resolve:n.reject)(i);return}var t;try{t=e(i)}catch(e){n.reject(e);return}n.resolve(t)})}function s(n){try{if(n===u)throw new TypeError("A promise cannot be resolved with itself.");if(n&&(typeof n==="object"||typeof n==="function")){var e=n.then;if(typeof e==="function"){r(e.bind(n),s,l);return}}o=true;i=n;a()}catch(n){l(n)}}function l(n){o=false;i=n;a()}function a(){for(var n=0,e=f.length;n<e;n++)c(f[n]);f=null}r(n,s,l)};function t(n,e,t,r){this.onFulfilled=typeof n==="function"?n:null;this.onRejected=typeof e==="function"?e:null;this.resolve=t;this.reject=r}function r(n,e,t){var r=false;try{n(function(n){if(r)return;r=true;e(n)},function(n){if(r)return;r=true;t(n)})}catch(n){if(r)return;r=true;t(n)}}function o(t){this.then=function(r){if(typeof r!=="function")return this;return new n.Promise(function(n,o){e(function(){try{n(r(t))}catch(n){o(n)}})})}}o.prototype=n.Promise.prototype;var i=new o(true);var f=new o(false);var u=new o(null);var c=new o(undefined);var s=new o(0);var l=new o("");n.Promise.resolve=function(e){if(e instanceof n.Promise)return e;if(e===null)return u;if(e===undefined)return c;if(e===true)return i;if(e===false)return f;if(e===0)return s;if(e==="")return l;if(typeof e==="object"||typeof e==="function"){try{var t=e.then;if(typeof t==="function"){return new n.Promise(t.bind(e))}}catch(e){return new n.Promise(function(n,t){t(e)})}}return new o(e)};n.Promise.all=function(e){var t=Array.prototype.slice.call(e);return new n.Promise(function(n,e){if(t.length===0)return n([]);var r=t.length;function o(i,f){try{if(f&&(typeof f==="object"||typeof f==="function")){var u=f.then;if(typeof u==="function"){u.call(f,function(n){o(i,n)},e);return}}t[i]=f;if(--r===0){n(t)}}catch(n){e(n)}}for(var i=0;i<t.length;i++){o(i,t[i])}})};n.Promise.reject=function(e){return new n.Promise(function(n,t){t(e)})};n.Promise.race=function(e){return new n.Promise(function(t,r){for(var o in e){n.Promise.resolve(e[o]).then(t,r)}})};n.Promise.prototype["catch"]=function(n){return this.then(null,n)};if(typeof Promise=="undefined")Promise=n.Promise;else n.Promise=Promise})(FrameNameSpace);